<%!
import htpc
settings = htpc.settings
WEBDIR = htpc.WEBDIR
%><!DOCTYPE html>
<html lang="en">
<head>
    <title>HTPC Manager - ${title}</title>
    <link href="${htpc.WEBDIR}favicon.ico" type="image/x-icon" rel="icon">
    <link rel="apple-touch-icon" href="${htpc.WEBDIR}img/ios/homescreen.png">
    <script src="${htpc.WEBDIR}js/libs/jquery.min.js"></script>
    <script src="${htpc.WEBDIR}js/libs/mediaelement/mediaelement-and-player.js"></script>
    <link rel="stylesheet" href="${htpc.WEBDIR}js/libs/mediaelement/mediaelementplayer.css" />
    <link href="${htpc.WEBDIR}css/font-awesome.min.css" rel="stylesheet">
</head>
<body >
<div class="container-fluid" >
    <div class="content">
    <video width="800" height="600" id="player" controls="controls" preload="none" autoplay="true" >
       <source src="${file}" />
        % for sub in subtitles:
            <track kind="subtitles" src="" data-src="${WEBDIR}kodi/subtitle/?server=${server}&subpath=${sub['path']}" srclang="${sub['srclang']}" label="${sub['label']} (${sub['type']})" >>/track>
        % endfor
    </video>
    </div>
</div>
<script>
    var player = ""
    $(document).ready(function() {

        player = new MediaElementPlayer('#player', {
                mode: '${mode}',
                plugins: [${plugins}],
                pluginPath: "${htpc.WEBDIR}js/libs/mediaelement/",
                flashName: "flashmediaelement-cdn.swf",
                defaultVideoWidth: '100%',
                defaultVideoHeight: '100%',
                videoWidth: '100%',
                videoHeight: '100%',
                enableAutosize: true,
                setDimensions: false,
                audioWidth: 400,
                audioHeight: 30,
                startVolume: 1,
                loop: false,
                alwaysShowControls: false,
                iPadUseNativeControls: false,
                iPhoneUseNativeControls: false, 
                AndroidUseNativeControls: false,
                alwaysShowHours: false,
                enableKeyboard: false,
                pauseOtherPlayers: true,
                features: ['playpause','current','progress','duration','method','tracks','VLCtracks',${features}'volume','fullscreen'],
                qualities: {${qualities}},
                defaultquality: ${quality},
                usePluginFullScreen: false,
                keyActions: [],
                customError: '<a href="">Download</a><BR />'
            });
        $(window).resize(function(e){
            if (player.media.pluginApi != null && player.media.pluginApi.setVideoSize) {
				player.media.pluginApi.setVideoSize($(player.media.pluginElement).outerWidth(true),$(player.media.pluginElement).outerHeight(true))
			}
        });
    });
</script>
</body>
</html>